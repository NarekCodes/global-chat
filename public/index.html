<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tumo Connection</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Landing Screen -->
    <div id="landing-screen" class="landing-container">
        <div class="landing-card">
            <h1>üé≠ Tumo Connection</h1>
            <p class="landing-subtitle">Create or join a room to chat</p>

            <div id="main-form">
                <input type="text" id="username-input" placeholder="Enter your username" autocomplete="off">
                <input type="text" id="avatar-input" placeholder="Avatar URL (Optional)" autocomplete="off">
                <div class="landing-buttons">
                    <button id="create-room-btn" class="primary-btn large-btn">Create New Room</button>
                    <button id="join-room-btn" class="secondary-btn large-btn">Join Existing Room</button>
                </div>
                <p class="easter-egg-hint">üí° Join room code: MAFIA to play the game!</p>
            </div>

            <div id="join-view" class="sub-view" style="display: none;">
                <h3>Join a Room</h3>
                <p class="sub-view-hint">Enter the 6-character room code</p>
                <input type="text" id="join-code-input" placeholder="ABC123" maxlength="6" autocomplete="off">
                <div class="sub-view-buttons">
                    <button id="confirm-join-btn" class="primary-btn">Join Room</button>
                    <button id="back-from-join" class="ghost-btn">‚Üê Back</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Interface -->
    <div class="main-container" id="main-interface" style="display: none;">
        <div id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <span class="room-label">Room Code</span>
                <span id="current-room-code" class="room-code-display">------</span>
                <button id="copy-code-btn" class="copy-code-btn" title="Copy">üìã</button>
            </div>
            <!-- Game-only: Phase indicator -->
            <div id="phase-indicator" class="phase-indicator" style="display: none;">
                <span id="phase-text">LOBBY</span>
            </div>
            <!-- Game-only: Role display -->
            <div id="role-display" class="role-display" style="display: none;">
                <span id="role-text">Your Role</span>
            </div>
            <div class="sidebar-divider"></div>
            <div class="sidebar-section-title">Commands</div>
            <!-- Standard mode commands -->
            <div id="standard-commands" class="command-hints">
                <div class="command-hint">/help - Show commands</div>
                <div class="command-hint">/getleader - Show leader</div>
            </div>
            <!-- Game mode commands -->
            <div id="game-commands" class="command-hints" style="display: none;">
                <div class="command-hint">/help - Show commands</div>
                <div class="command-hint">/start - Begin game</div>
            </div>
        </div>

        <div class="chat-container">
            <header class="chat-header">
                <h1><span id="room-name-display">Chat Room</span></h1>
            </header>
            <div id="messages-area" class="messages-area"></div>
            <div id="typing-indicator" class="typing-indicator">
                <div class="typing-dots"><span></span><span></span><span></span></div>
                <span id="typing-text"></span>
            </div>
            <div class="input-area">
                <div id="action-menu-container" class="action-menu-container">
                    <button id="action-btn" class="action-btn">+</button>
                    <div id="floating-menu" class="floating-menu">
                        <div class="menu-item" id="menu-emoji"><span class="icon">üòä</span> Emojis</div>
                    </div>
                </div>
                <input id="message-input" type="text" placeholder="Type a message..." autocomplete="off">
                <button id="send-button">Send</button>
                <div id="emoji-picker" class="emoji-picker" style="display: none;">
                    <span>üòä</span><span>üòÇ</span><span>üëç</span><span>‚ù§Ô∏è</span>
                    <span>ÔøΩ</span><span>ÔøΩ</span><span>ÔøΩ</span><span>ÔøΩ</span>
                </div>
            </div>
        </div>

        <div id="online-users" class="online-users-container">
            <h3 id="members-title">Members</h3>
            <ul id="user-list"></ul>
        </div>
    </div>

    <!-- Role Reveal Modal (Game only) -->
    <div id="role-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content role-modal-content">
            <h2>Your Role</h2>
            <div id="role-modal-icon" class="role-icon">üé≠</div>
            <h3 id="role-modal-role">Villager</h3>
            <p id="role-modal-goal">Your goal...</p>
            <button id="role-modal-close" class="primary-btn">Got it!</button>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="gameover-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content gameover-modal-content">
            <h2>Game Over</h2>
            <div id="gameover-icon" class="gameover-icon">üéâ</div>
            <p id="gameover-message">Town wins!</p>
            <button id="gameover-close" class="primary-btn">Back to Lobby</button>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="error-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content error-modal-content">
            <h2 id="error-heading">Error</h2>
            <p id="error-message-text">Something went wrong.</p>
            <button id="close-error-btn" class="primary-btn">Dismiss</button>
        </div>
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu" style="display: none;">
        <div id="ctx-copy" class="context-item">Copy Text</div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>

</html>