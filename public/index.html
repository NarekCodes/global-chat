<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Chat</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="login-screen" class="login-container">
        <h1>Welcome</h1>
        <input type="text" id="username-input" placeholder="Enter your username" autocomplete="off">
        <input type="text" id="avatar-input" placeholder="Avatar Image URL (Optional)" autocomplete="off">
        <button id="join-button">Join Chat</button>
    </div>

    <!-- Wrapper for chat and sidebar -->
    <div class="main-container" id="main-interface" style="display: none;">
        <div id="sidebar" class="sidebar">
            <div class="sidebar-header">Rooms</div>
            <button id="room-global" class="room-btn active">ğŸŒ Global Chat</button>
            <button id="room-report" class="room-btn">ğŸ› Report Bug</button>
        </div>
        <div class="chat-container">
            <header class="chat-header">
                <h1><span id="room-name-display">Global Chat Room</span></h1>
            </header>
            <div id="messages-area" class="messages-area">
                <!-- Messages will be injected here -->
            </div>
            <div id="typing-indicator" class="typing-indicator">
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <span id="typing-text"></span>
            </div>
            <div class="input-area">
                <div id="action-menu-container" class="action-menu-container">
                    <button id="action-btn" class="action-btn">+</button>
                    <div id="floating-menu" class="floating-menu">
                        <div class="menu-item" id="menu-emoji">
                            <span class="icon">ğŸ˜Š</span> Emojis
                        </div>
                        <div class="menu-item" id="menu-url">
                            <span class="icon">ğŸ”—</span> Paste URL
                        </div>
                        <div class="menu-item" id="menu-upload">
                            <span class="icon">ğŸ“¤</span> Upload
                        </div>
                    </div>
                </div>
                <input type="file" id="file-input" accept="image/*,video/*" style="display: none;">
                <div id="reply-preview" class="reply-preview" style="display: none;">
                    <span id="reply-text">Replying to...</span>
                    <button id="cancel-reply">âœ•</button>
                </div>
                <input id="message-input" type="text" placeholder="Type a message..." autocomplete="off">
                <button id="send-button">Send</button>

                <div id="emoji-picker" class="emoji-picker" style="display: none;">
                    <span>ğŸ˜Š</span><span>ğŸ˜‚</span><span>ğŸ‘</span><span>â¤ï¸</span>
                    <span>ğŸ‰</span><span>ğŸ™</span><span>ğŸ¥³</span><span>ğŸ¤”</span>
                    <span>ğŸ˜</span><span>ğŸ˜­</span><span>ğŸ”¥</span><span>ğŸ’¯</span>
                    <span>ğŸ‘€</span><span>ğŸš€</span><span>ğŸ˜</span><span>ğŸ‘‹</span>
                </div>
            </div>
        </div>

        <div id="online-users" class="online-users-container">
            <h3>Online Users</h3>
            <ul id="user-list"></ul>
        </div>
    </div>

    <div id="context-menu" class="context-menu" style="display: none;">
        <div id="ctx-reply" class="context-item">Reply</div>
        <div id="ctx-copy" class="context-item">Copy Text</div>
        <div id="ctx-report" class="context-item">Report User</div>
        <hr class="context-divider">
        <div id="ctx-delete-me" class="context-item delete-action" style="display: none;">Delete for me</div>
        <div id="ctx-delete-all" class="context-item delete-action danger-action" style="display: none;">Delete for all
        </div>
        <div id="admin-actions" style="display: none;">
            <hr class="context-divider">
            <div id="ctx-kick" class="context-item admin-action">Kick User</div>
            <div id="ctx-ban" class="context-item admin-action">Ban User</div>
            <div id="mute-option" class="context-item admin-action">Mute User</div>
        </div>
    </div>

    <div id="match-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content match-modal-content">
            <h2 id="match-heading">ğŸ‰ Match Found!</h2>
            <p id="match-partner-text">You are matched with: <span id="match-partner-name"
                    style="font-weight: bold; color: #ffeb3b;"></span></p>
            <div class="modal-actions">
                <button id="start-match-btn" class="primary-btn">Start Conversation</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <div id="image-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>Attach Image</h3>
            <input type="text" id="image-url-input" placeholder="Paste Image URL here">
            <div class="modal-actions">
                <button id="cancel-image-btn" class="secondary-btn">Cancel</button>
                <button id="send-image-btn" class="primary-btn">Send</button>
            </div>
        </div>
    </div>

    <div id="error-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content error-modal-content">
            <h2 id="error-heading">Invalid Username</h2>
            <p id="error-message-text">Spaces are restricted. Use underscores or hyphens to separate words.</p>
            <div class="modal-actions">
                <button id="close-error-btn" class="primary-btn error-dismiss-btn">Dismiss</button>
            </div>
        </div>
    </div>

    <script src="client.js"></script>
</body>

</html>